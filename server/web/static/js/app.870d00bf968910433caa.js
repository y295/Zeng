webpackJsonp([1],{0:function(t,e,n){n("briU"),t.exports=n("NHnr")},"09yM":function(t,e){},"1/fJ":function(t,e){},"3Xn4":function(t,e){},"7Otq":function(t,e,n){t.exports=n.p+"static/img/logo.4f5b2c1.png"},DQIT:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),i=n("TcQY"),a=n.n(i),r=(n("09yM"),n("/ocq")),c=n("Xxa5"),o=n.n(c),u=n("exGp"),l=n.n(u),d=n("mvHQ"),m=n.n(d),p={data:function(){return{input:"",username:"",controlRotate:"paused",modelCollection:[],music:{},localMusic:{}}},computed:{nowMusic:{get:function(){return this.localMusic=JSON.parse(localStorage.getItem("nowMusic"))||"",this.$store.getters.getMusic},set:function(t){this.common.setNowMusic(t)}},autoplay:function(){return this.$store.getters.getAutoplay},music_name:{get:function(){return this.nowMusic.music_address||this.localMusic.music_address?(this.nowMusic.music_address||this.localMusic.music_address).substring(35).replace(".mp3",""):""},set:function(){}},music_address:function(){return this.nowMusic.music_address||this.localMusic.music_address||""},music_id:function(){return this.nowMusic._id||this.localMusic._id||""},isCollected:function(){return-1!=m()(this.modelCollection).indexOf(m()(this.nowMusic))||-1!=m()(this.modelCollection).indexOf(m()(this.localMusic))}},methods:{login:function(){this.$router.push("/login")},logout:function(){this.username="",localStorage.removeItem("username"),location.reload()},register:function(){this.$router.push("/register")},rotate:function(){this.controlRotate="running"},noRotate:function(){this.controlRotate="paused"},fetchMyMusics:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.username){e.next=5;break}return e.next=3,t.$http.get("/musics/collection/"+t.username+"?data="+(new Date).getTime());case 3:n=e.sent,t.modelCollection=n.data;case 5:case"end":return e.stop()}},e,t)}))()},collection:function(t,e){var n=this;return l()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!t){s.next=7;break}return s.next=3,n.$http.put("/musics/collection/"+t+"/"+e,e);case 3:s.sent,n.fetchMyMusics(),s.next=8;break;case 7:n.$router.push("/login");case 8:case"end":return s.stop()}},s,n)}))()},del:function(t,e){var n=this;return l()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.$http.delete("/musics/delete/"+t+"/"+e,e);case 2:s.sent,n.fetchMyMusics();case 4:case"end":return s.stop()}},s,n)}))()},play:function(){var t=this.$refs.audio;t.paused&&t.play()},pause:function(){var t=this.$refs.audio;t.played&&t.pause()},next:function(){var t;if(this.nowMusic._id){var e=this.nowMusic;t=this.modelCollection.findIndex(function(t){return t._id==e._id})}else{var n=this.localMusic;t=this.modelCollection.findIndex(function(t){return t._id==n._id})}t=(t+1)%this.modelCollection.length,this.nowMusic=this.modelCollection[t]},prev:function(){var t;if(this.nowMusic._id){var e=this.nowMusic;t=this.modelCollection.findIndex(function(t){return t._id==e._id})}else{var n=this.localMusic;t=this.modelCollection.findIndex(function(t){return t._id==n._id})}t=(t+this.modelCollection.length-1)%this.modelCollection.length,this.nowMusic=this.modelCollection[t]},search:function(){this.input&&this.$router.push("/musics/search/"+this.input)},getInput:function(t){this.input=t}},created:function(){this.username=localStorage.getItem("username")||"",this.localMusic=JSON.parse(localStorage.getItem("nowMusic"))||"",this.fetchMyMusics()}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"all_wrap"},[s("div",{staticClass:"header_wrap"},[s("div",{staticClass:"header"},[t._m(0),t._v(" "),s("div",{staticClass:"mune_wrap"},[s("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal",router:"","default-active":t.$route.path}},[s("el-menu-item",{attrs:{index:"/main"}},[t._v("首页")]),t._v(" "),s("el-menu-item",{attrs:{index:"/musics/musicbook"}},[t._v("曲库")]),t._v(" "),s("el-menu-item",{attrs:{index:"/musics/singerbook"}},[t._v("歌手")]),t._v(" "),s("el-menu-item",{attrs:{index:"/musics/ranking"}},[t._v("排行榜")])],1)],1),t._v(" "),s("div",{staticClass:"login_wrap"},[s("el-dropdown",[s("span",{staticClass:"user"},[t._v(t._s(t.username||"未登录"))]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.username?t._e():s("el-dropdown-item",[s("a",{on:{click:t.login}},[t._v("登录")])]),t._v(" "),t.username?s("el-dropdown-item",[s("a",{on:{click:t.logout}},[t._v("退出")])]):s("el-dropdown-item",[s("a",{on:{click:t.register}},[t._v("注册")])])],1)],1)],1),t._v(" "),s("div",{staticClass:"search_warp"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"音乐/歌手"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1)])]),t._v(" "),s("div",{staticClass:"container2_wrap"},[s("div",{staticClass:"container2"},[s("el-container",[s("el-aside",{attrs:{width:"280px"}},[s("div",{attrs:{id:"music"}},[s("div",{attrs:{id:"music_container"}},[t.music_name?s("div",{staticClass:"collection"},[t.isCollected?s("span",[t._v("已收藏")]):s("span",{on:{click:function(e){return t.collection(t.username,t.music_id)}}},[t._v("收藏")])]):t._e(),t._v(" "),s("div",[s("h3",{attrs:{id:"musicName"}},[t._v(t._s(t.music_name))])]),t._v(" "),s("img",{staticClass:"rotate",style:{"animation-play-state":t.controlRotate},attrs:{src:n("h8RL"),id:"musicImg"}}),t._v(" "),s("audio",{ref:"audio",attrs:{src:t.music_address,controls:"",id:"audio",autoplay:t.autoplay},on:{play:t.rotate,pause:t.noRotate,ended:t.next}}),t._v(" "),s("div",{staticClass:"btn"},[s("button",{attrs:{id:"play"},on:{click:t.play}},[t._v("play")]),t._v(" "),s("button",{attrs:{id:"pause"},on:{click:t.pause}},[t._v("pause")]),t._v(" "),s("button",{attrs:{id:"prev"},on:{click:t.prev}},[t._v("prev")]),t._v(" "),s("button",{attrs:{id:"next"},on:{click:t.next}},[t._v("next")])])])])]),t._v(" "),s("el-main",[s("router-view",{key:t.$route.path,on:{func:t.getInput}})],1),t._v(" "),s("el-aside",{staticStyle:{"background-color":"#f3f3f3"},attrs:{width:"250px"}},[s("div",{staticClass:"music_collection",model:{value:t.modelCollection,callback:function(e){t.modelCollection=e},expression:"modelCollection"}},[s("div",{staticClass:"title"},[s("span",[s("b",[t._v("收藏列表")])])]),t._v(" "),s("ul",t._l(t.modelCollection,function(e){return s("li",{staticClass:"music_li"},[s("span",{staticClass:"music_name"},[s("a",{on:{click:function(n){return t.common.setNowMusic(e)}}},[t._v(t._s(e.music_name))])]),t._v(" "),s("span",{staticClass:"del",on:{click:function(n){return t.del(t.username,e._id)}}},[s("a",[t._v("删除")])]),t._v(" "),t._l(e.singers_list,function(e){return s("span",{staticClass:"singers_list"},[s("a",{staticClass:"singer_name",on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])])})],2)}),0)])])],1)],1)]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:n("7Otq"),height:"50",width:"200"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer_wrap"},[n("div",{staticClass:"footer"},[n("div",{staticClass:"link"},[n("div",{staticClass:"title"},[n("span",[n("b",[t._v("友情链接")])])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://www.kugou.com/"}},[t._v("酷狗音乐")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://music.163.com/"}},[t._v("网易云音乐")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://www.kuwo.cn/"}},[t._v("酷我音乐")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://5sing.kugou.com/"}},[t._v("5SING")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.bilibili.com/"}},[t._v("哔哩哔哩")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://www.yue365.com/"}},[t._v("365音乐网")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.1ting.com/"}},[t._v("一听音乐网")])])])])])])}]};var f=n("VU/8")(p,_,!1,function(t){n("y4bf")},null,null).exports,h={data:function(){return{model:{}}},methods:{login:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/login",t.model);case 2:0===(n=e.sent).data.status&&(localStorage.setItem("username",n.data.username),t.$message({type:"success",message:"登录成功"}),t.$router.push("/"));case 4:case"end":return e.stop()}},e,t)}))()}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-login"},[n("div",[n("el-card",{staticClass:"card-view",attrs:{"body-style":{padding:"0px"}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("请登录")])]),t._v(" "),n("el-form",{ref:"form",staticClass:"card-body",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:t.model.username,callback:function(e){t.$set(t.model,"username",e)},expression:"model.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1),t._v(" "),n("div",{staticClass:"go_register",on:{click:function(){return t.$router.push("/register")}}},[n("span",[t._v("注册账号")])])],1)],1)])},staticRenderFns:[]};var g=n("VU/8")(h,v,!1,function(t){n("R2TD")},"data-v-369eccc2",null).exports,w={data:function(){return{model:{}}},methods:{register:function(){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/register",t.model);case 2:0===e.sent.data.status&&(t.$router.push("/login"),t.$message({type:"success",message:"注册成功"}));case 4:case"end":return e.stop()}},e,t)}))()}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-register"},[n("div",[n("el-card",{staticClass:"card-view",attrs:{"body-style":{padding:"0px"}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("请注册")])]),t._v(" "),n("el-form",{ref:"form",staticClass:"card-body",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:t.model.username,callback:function(e){t.$set(t.model,"username",e)},expression:"model.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"确认密码"}},[n("el-input",{attrs:{type:"password"},model:{value:t.model.again_password,callback:function(e){t.$set(t.model,"again_password",e)},expression:"model.again_password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.register}},[t._v("注册")])],1)],1),t._v(" "),n("div",{staticClass:"go_login",on:{click:function(){return t.$router.push("/login")}}},[n("span",[t._v("登录账号")])])],1)],1)])},staticRenderFns:[]};var b=n("VU/8")(w,k,!1,function(t){n("qH8I")},"data-v-7342d21a",null).exports,C={data:function(){return{modelRecommend:[],modelNew:[],modelSingers:[]}},methods:{fetchRecommendMusics:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/musics/recommend");case 2:n=e.sent,t.modelRecommend=n.data;case 4:case"end":return e.stop()}},e,t)}))()},fetchNewMusics:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/musics/new");case 2:n=e.sent,t.modelNew=n.data;case 4:case"end":return e.stop()}},e,t)}))()},fetchRecommendSingers:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/singers/recommend");case 2:n=e.sent,t.modelSingers=n.data;case 4:case"end":return e.stop()}},e,t)}))()}},created:function(){this.fetchRecommendMusics(),this.fetchNewMusics(),this.fetchRecommendSingers()}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mian_wrap"},[n("div",{staticClass:"new_music"},[t._m(0),t._v(" "),n("ul",t._l(t.modelNew,function(e){return n("li",{staticClass:"music_li"},[n("span",{staticClass:"music_name"},[n("a",{on:{click:function(n){return t.common.setNowMusic(e)}}},[t._v(t._s(e.music_name))])]),t._v(" "),t._l(e.singers_list,function(e){return n("span",{staticClass:"singers_list"},[n("a",{staticClass:"singer_name",on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])])})],2)}),0)]),t._v(" "),n("div",{staticClass:"music_recommend"},[t._m(1),t._v(" "),n("ul",t._l(t.modelRecommend,function(e){return n("li",{staticClass:"music_li"},[n("span",{staticClass:"music_name"},[n("a",{on:{click:function(n){return t.common.setNowMusic(e)}}},[t._v(t._s(e.music_name))])]),t._v(" "),t._l(e.singers_list,function(e){return n("span",{staticClass:"singers_list"},[n("a",{staticClass:"singer_name",on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])])})],2)}),0)]),t._v(" "),n("div",{staticClass:"singer_recommend"},[t._m(2),t._v(" "),n("ul",t._l(t.modelSingers,function(e){return n("li",{staticClass:"singerR_li"},[n("span",{staticClass:"singerR_name"},[n("a",{on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("最新音乐")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("音乐推荐")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("歌手推荐")])])])}]};var y=n("VU/8")(C,x,!1,function(t){n("DQIT")},null,null).exports,$={props:{id:{require:!0}},data:function(){return{model:{},music_list:[]}},methods:{fetchDetail:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/singers/introduce/"+t.id);case 2:n=e.sent,t.model=n.data[0];case 4:case"end":return e.stop()}},e,t)}))()},fetchMusicList:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/singers/music_list/"+t.id);case 2:n=e.sent,t.music_list=n.data;case 4:case"end":return e.stop()}},e,t)}))()}},created:function(){this.fetchDetail(),this.fetchMusicList()}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"intro_wrap"},[n("div",{staticClass:"singer_wrap"},[t._m(0),t._v(" "),n("img",{attrs:{src:t.model.photo_address,id:"singer_photo"}}),t._v(" "),n("div",{attrs:{id:"singer_introduce"}},[t._v("    "+t._s(t.model.introduce))])]),t._v(" "),n("div",{staticClass:"music_list"},[t._m(1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.music_list,"max-height":"240","header-cell-style":{background:"#fafafa"},"row-style":{height:"0px",background:"#fafafa"},"cell-style":{padding:"2px"}}},[n("el-table-column",{attrs:{prop:"music_name",label:"歌曲名",type:"index",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{on:{click:function(n){return t.common.setNowMusic(e.row)}}},[t._v(t._s(e.row.music_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"singers_list",label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.singers_list,function(e){return n("li",{on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"categories",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.categories,function(e){return n("li",{on:{click:function(){return t.$router.push("/musics/musicbook/"+e._id)}}},[t._v(t._s(e.title))])})}}])})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("歌手介绍")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("推荐歌曲")])])])}]};var S=n("VU/8")($,M,!1,function(t){n("1/fJ")},null,null).exports,R={data:function(){return{music_list:[]}},methods:{fetchMusicList:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/musics/ranking/");case 2:n=e.sent,t.music_list=n.data;case 4:case"end":return e.stop()}},e,t)}))()}},created:function(){this.fetchMusicList()}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ranking_wrap"},[t._m(0),t._v(" "),n("div",{staticClass:"music_list"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.music_list,"max-height":"420","header-cell-style":{background:"#fafafa"},"row-style":{height:"0px",background:"#fafafa"},"cell-style":{padding:"1px"}}},[n("el-table-column",{attrs:{label:"排名",type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"music_name",label:"音乐名",type:"index",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{on:{click:function(n){return t.common.setNowMusic(e.row)}}},[t._v(t._s(e.row.music_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"singers_list",label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.singers_list,function(e){return n("li",{on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"categories",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.categories,function(e){return n("li",{on:{click:function(){return t.$router.push("/musics/musicbook/"+e._id)}}},[t._v(t._s(e.title))])})}}])}),t._v(" "),n("el-table-column",{attrs:{label:"收藏量",prop:"collection_num"}})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("音乐排行榜")])])])}]};var N=n("VU/8")(R,P,!1,function(t){n("xQUQ")},null,null).exports,E={props:{id:{require:!0}},data:function(){return{tags:[],music_list:[],pagination:{totalPage:1,currentPage:1}}},methods:{fetchTags:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/tags");case 2:n=e.sent,t.tags=n.data;case 4:case"end":return e.stop()}},e,t)}))()},fetchMusicList:function(){var t=this;return l()(o.a.mark(function e(){var n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=8;break}return e.next=3,t.$http.get("/musics/musicbook/"+t.pagination.currentPage);case 3:n=e.sent,t.music_list=n.data.list,t.pagination.totalPage=n.data.totalPage,e.next=13;break;case 8:return e.next=10,t.$http.get("/musics/musicbook/"+t.id+"/"+t.pagination.currentPage);case 10:s=e.sent,t.music_list=s.data.list,t.pagination.totalPage=s.data.totalPage;case 13:case"end":return e.stop()}},e,t)}))()},change:function(t){t?this.$router.push("/musics/musicbook/"+t):this.$router.push("/musics/musicbook")},handleCurrentChange:function(t){this.pagination.currentPage=t,this.fetchMusicList()}},created:function(){this.fetchTags(),this.fetchMusicList()}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"MusicBook_wrap"},[t._m(0),t._v(" "),n("div",{staticClass:"tags"},[n("ul",[n("li",{class:{"tag-current":!t.id},on:{click:function(e){return t.change()}}},[n("a",[t._v("全部")])]),t._v(" "),t._l(t.tags,function(e){return n("li",{key:e._id,class:{"tag-current":t.id==e._id},on:{click:function(n){return t.change(e._id)}}},[n("a",[t._v(t._s(e.title))])])})],2)]),t._v(" "),n("div",{staticClass:"music_list"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.music_list,"max-height":"420","header-cell-style":{background:"#fafafa"},"row-style":{height:"0px",background:"#fafafa"},"cell-style":{padding:"2px"}}},[n("el-table-column",{attrs:{prop:"music_name",label:"音乐名",type:"index",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{on:{click:function(n){return t.common.setNowMusic(e.row)}}},[t._v(t._s(e.row.music_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"singers_list",label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.singers_list,function(e){return n("li",{on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"categories",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.categories,function(e){return n("li",{on:{click:function(){return t.$router.push("/musics/musicbook/"+e._id)}}},[t._v(t._s(e.title))])})}}])})],1)],1),t._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{layout:"prev, pager, next","page-count":t.pagination.totalPage,"current-page":t.pagination.currentPage},on:{"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("音乐库")])])])}]};var U=n("VU/8")(E,I,!1,function(t){n("kjoU")},null,null).exports,L={props:{input:{require:!0}},data:function(){return{music_list:[],pagination:{totalPage:1,currentPage:1}}},methods:{fetchMusicList:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/musics/search/"+t.input+"/"+t.pagination.currentPage+"?data="+(new Date).getTime());case 2:n=e.sent,t.music_list=n.data.list,t.pagination.totalPage=n.data.totalPage,t.$emit("func",t.input);case 6:case"end":return e.stop()}},e,t)}))()},handleCurrentChange:function(t){this.pagination.currentPage=t,this.fetchMusicList()}},created:function(){this.fetchMusicList()}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search_wrap"},[t._m(0),t._v(" "),n("div",{staticClass:"music_list"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.music_list,"max-height":"420","header-cell-style":{background:"#fafafa"},"row-style":{height:"0px",background:"#fafafa"},"cell-style":{padding:"3px"}}},[n("el-table-column",{attrs:{prop:"music_name",label:"音乐名",type:"index",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{on:{click:function(n){return t.common.setNowMusic(e.row)}}},[t._v(t._s(e.row.music_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"singers_list",label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.singers_list,function(e){return n("li",{on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"categories",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.categories,function(e){return n("li",{on:{click:function(){return t.$router.push("/musics/musicbook/"+e._id)}}},[t._v(t._s(e.title))])})}}])})],1)],1),t._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{layout:"prev, pager, next","page-count":t.pagination.totalPage,"current-page":t.pagination.currentPage},on:{"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("搜索结果")])])])}]};var T=n("VU/8")(L,F,!1,function(t){n("3Xn4")},null,null).exports,V={data:function(){return{singer_list:[],pagination:{totalPage:1,currentPage:1}}},methods:{fetchSingerList:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/musics/singerbook/"+t.pagination.currentPage+"?data="+(new Date).getTime());case 2:n=e.sent,t.singer_list=n.data.list,t.pagination.totalPage=n.data.totalPage;case 5:case"end":return e.stop()}},e,t)}))()},handleCurrentChange:function(t){this.pagination.currentPage=t,this.fetchSingerList()}},created:function(){this.fetchSingerList()}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SingerBook_wrap"},[t._m(0),t._v(" "),n("div",{staticClass:"singer_list"},[n("ul",t._l(t.singer_list,function(e){return n("li",[n("span",{staticClass:"singerR_name"},[n("a",{on:{click:function(n){return t.common.singer(e._id)}}},[t._v(t._s(e.singer_name))])])])}),0)]),t._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{layout:"prev, pager, next","page-count":t.pagination.totalPage,"current-page":t.pagination.currentPage},on:{"current-change":t.handleCurrentChange}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[e("b",[this._v("歌手库")])])])}]};var D=n("VU/8")(V,A,!1,function(t){n("kgGi")},null,null).exports;s.default.use(r.a);var q=new r.a({routes:[{path:"/",component:f,children:[{path:"/main",component:y},{path:"/",component:y},{path:"/singers/:id",component:S,props:!0},{path:"/musics/ranking",component:N},{path:"/musics/musicbook",component:U},{path:"/musics/musicbook/:id",component:U,props:!0},{path:"/musics/singerbook",component:D},{path:"/musics/search/:input",component:T,props:!0}]},{path:"/login",component:g},{path:"/register",component:b}]}),Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},O=n("VU/8")({name:"app"},Q,!1,null,null,null).exports,H=n("//Fk"),J=n.n(H),j=n("x7Ey"),G=n.n(j).a.create({baseURL:"http://localhost:3000/web/api"});G.interceptors.response.use(function(t){return t},function(t){return 422===t.response.status&&s.default.prototype.$message({type:"error",message:t.response.data.message}),401===t.response.status&&q.push("/login"),J.a.reject(t)});var W=G,X=(n("briU"),n("48sp"));s.default.use(X.a);var B={music:{},autoplay:!1},z={getMusic:function(){return B.music},getAutoplay:function(){return B.autoplay}},Y=new X.a.Store({state:B,getters:z,mutations:{nowMusic:function(t,e){t.music=e},nowAutoplay:function(t){t.autoplay=!0}},actions:{getNowMusic:function(t,e){t.commit("nowMusic",e)},getNoWAutoplay:function(t){t.commit("nowAutoplay")}}}),K={setNowMusic:function(t){var e={_id:t._id,music_name:t.music_name,music_address:t.music_address,singers_list:t.singers_list},n=m()(e);localStorage.setItem("nowMusic",n),Y.dispatch("getNowMusic",e),Y.dispatch("getNoWAutoplay"),Y.dispatch("getNoWAutoplay",e)},singer:function(t){tt.$router.push("/singers/"+t)}};s.default.config.productionTip=!1,s.default.prototype.$http=W,s.default.prototype.common=K,s.default.use(a.a);var Z=new s.default({el:"#app",router:q,store:Y,components:{App:O},template:"<App/>"}),tt=e.default=Z},R2TD:function(t,e){},h8RL:function(t,e,n){t.exports=n.p+"static/img/yuan.6f43eb0.png"},kgGi:function(t,e){},kjoU:function(t,e){},qH8I:function(t,e){},xQUQ:function(t,e){},y4bf:function(t,e){}},[0]);
//# sourceMappingURL=app.870d00bf968910433caa.js.map